---
driver:
  name: vagrant
  customize:
    cpus: 2
    memory: 2048
  network:
    - - forwarded_port
      - guest: 8980
        host: 8980
        auto_correct: true

provisioner:
  name: chef_solo

platforms:
  - name: CentOS-6-x86_64-minimal
    driver_config:
      box: CentOS-6-x86_64-minimal
      box_url: http://mirror.informatik.hs-fulda.de/pub/vagrant/CentOS-6-x86_64-minimal.box
    attributes:
      postgresql:
        enable_pgdg_yum: true
      server:
        packages: ["postgresql93-server"]
        service_name: "postgresql-9.3"
      client:
        packages: ["postgresql93"]
      opennms:
        home: "/opt/opennms"
  - name: Ubuntu-1404-x86_64-server
    driver_config:
      box: Ubuntu-1404-x86_64-server
      box_url: http://mirror.informatik.hs-fulda.de/pub/vagrant/Ubuntu-1404-x86_64-server.box
    attributes:
      postgresql:
        enable_pgdg_apt: "true"
        client:
          packages: ["postgresql-client-9.3"]
        server:
          packages: ["postgresql-9.3"]
        contrib: 
          packages: ["postgresql-contrib-9.3"]
      opennms:
        home: "/usr/share/opennms"
suites:
  - name: default
    run_list:
      - recipe[java]
      - recipe[postgresql::server]
      - recipe[opennms::default]
    attributes:
      opennms:
        release: "stable"
        jpda: "false"

  - name: remote-poller
    run_list:
      - recipe[java]
      - recipe[opennms::remote-poller]
    attributes:
      java:
        install_flavor: "openjdk"
        jdk_version: "7"
      opennms:
        release: "stable"
        home: "/usr/share/opennms"
        location: "Host-Europe"
        baseurl: "https://opennms.opennms-edu.net/opennms-remoting"
